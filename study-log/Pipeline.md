## Pipeline in Shell

### Redirection

`>` : 명령어의 결과를 파일로 보냄

```shell
echo "hi" > temp.txt
```

- 일반적으로 한 번만 사용하는게 정석

### Pipe

- 명령어의 결과를 다음 명령어로 전달

```shell
ls -l | grep "txt"
```

---

## Standard Streams

Linux O.S 는 기본적으로 3개의 통로를 열어준다.

- 0번 : 표준 입력, Stdin - 키보드, 파이프로 들어오는 데이터
- 1번 : 표준 출력, Stdout - `>`, `|` 등이 가져가는 정상적인 결과물
- 2번 : 표준 에러, Stderr - 오류 메시지, 경고가 나가는 별도적인 통로

위 Pipe, Redirection 은 1번에 연결

- 에러가 발생하면, 파이프를 타지 않고 화면에 출력

```shell
ls file.txt > result.txt 2>&1
```

`2>&1` : 2번 통로도, 1번 통로가 가는 곳으로 같이 보내라는 의미

- `/dev/null` : 일종의 무한 쓰레기통

해당 스트림으로 보내면, 아무것도 저장되지 않고 흔적도 없이 사라진다.

- `2> /dev/null` : 에러 버리기
- `> /dev/null` : 결과 버리기
- `/dev/null 2>&1` : 에러, 결과 둘다 버리기

=> 이를 통해, 에러 메시지가 정상 데이터와 섞여 나오는 것을 방지할 수 있다.

관심사 분리 가능

- 순수 데이터는 다음 단계, 에러는 따로 추출

> 리눅스는 하드웨어도 파일처럼 다룸

### `cat` + `|` VS `>`

- `cat backup.sql | mysql -u ...`

1. cat 프로세스 실행
2. 파이프 연결
3. `mysql` 프로세스 실행

=> 불필요하게 프로세스 2번 실행

- `mysql -u ... < backup.sql`

1. 쉘이 파일을 열어서 `mysql` 에 넣음

=> 프로세스 1번 실행